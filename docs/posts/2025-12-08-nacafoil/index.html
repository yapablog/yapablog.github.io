<!DOCTYPE html>
<html lang="ja">
  <head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-2BSLJEKTVJ"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-2BSLJEKTVJ');
    </script>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>JavaScriptでNACA4桁翼型を生成するアルゴリズム | やぱのブログ</title>
    <meta name="description" content="航空工学・生物模倣など" />
    <link rel="icon" href="/favicon.ico">
    <link rel="stylesheet" href="/assets/css/tailwind-output.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Serif+JP:wght@200..900&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Serif+JP:wght@700&family=Zen+Kaku+Gothic+New&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Serif+JP:wght@700&family=WDXL+Lubrifont+TC&family=Zen+Kaku+Gothic+New&display=swap"
      rel="stylesheet"
    />
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@100..900&display=swap" rel="stylesheet">
  </head>


  <body class="flex flex-col min-h-screen">
    <!--
  開発用ブレイクポイント
  all(mobile):
  sm(min-width: 640px):スマホ横～
  md(min-width: 768px):タブレット
  lg(min-width: 1024px):ノートPC
  xl(min-width: 1280px):大型ディスプレイ
  2xl(min-width: 1536px):超ワイド画面
-->

<header
  class=" top-0 z-50 w-full border-b-2 border-[#624ba1ee] divide-gray-400 py-2 bg-white"
>
  <div
  class="flex flex-col md:flex-row md:items-center md:justify-between w-full"
>
  <a
    href="/"
    class="flex px-2 items-center justify-center md:justify-start mb-2 md:mb-0"
  >
    <img
      class="h-6 md:h-10 w-auto ml-2"
      src="/assets/images/logo.png"
      alt="ロゴ"
    />
    <div class="flex flex-col leading-tigh ">
      <div class="ml-2 text-[1.0rem] md:text-[1.4rem] text-center text-gray-800 font-black">
        やぱのブログ
      </div>
      <div class="ml-2 text-[0.3rem] md:text-[0.6rem] text-center text-gray-600 font-medium leading-none hidden md:block">
        航空工学・生物模倣など
      </div>
    </div>
  </a>
  <nav
    class="flex flex-wrap divide-x divide-gray-400 text-center font-semibold text-sm md:text-base md:mr-2"
  >
    <a href="/" class="nav-link">Home</a>
    <a href="/tools/" class="nav-link">Tools</a>
    <a href="/articles/" class="nav-link">Articles</a>
    <a href="/contact/" class="nav-link">Contact</a>
  </nav>
</div>
</header>

    <main class="mx-auto flex-grow w-full">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" integrity="sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js" integrity="sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG+vnGctmUb0ZY0l8" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js" integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous"></script>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement(document.body, {
          // 数式の区切り文字を設定
          delimiters: [
              {left: '$$', right: '$$', display: true},  // ブロック数式
              {left: '$', right: '$', display: false},   // インライン数式
              {left: '\\(', right: '\\)', display: false},
              {left: '\\[', right: '\\]', display: true}
          ],
          // エラーが出ても無視してそのまま表示する設定
          throwOnError : false
        });
    });
</script>
<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10">

  <header class="mb-6 border-b border-gray-200 pb-2">
    <div class="text-3xl font-bold text-gray-800 mb-1">JavaScriptでNACA4桁翼型を生成するアルゴリズム</div>
    <p class="text-sm text-gray-500">2025/12/08</p>
  </header>
  <div class="container mx-auto px-4">
  
    <div class="lg:grid lg:grid-cols-12 lg:gap-10">
      
      <main class="lg:col-span-9">  
        <div class="note-toc-inline">
          <p class="toc-title">目次</p>
          <ul id="toc" class="section-nav">
<li class="toc-entry toc-h2"><a href="#naca-4-桁系列とは">NACA 4 桁系列とは？</a></li>
<li class="toc-entry toc-h2"><a href="#生成アルゴリズム">生成アルゴリズム</a>
<ul>
<li class="toc-entry toc-h3"><a href="#1-座標の離散化cosine-spacing">1. 座標の離散化（Cosine Spacing）</a></li>
<li class="toc-entry toc-h3"><a href="#2-翼厚分布-y_t">2. 翼厚分布 ($y_t$)</a></li>
<li class="toc-entry toc-h3"><a href="#3-キャンバーライン-y_c">3. キャンバーライン ($y_c$)</a></li>
<li class="toc-entry toc-h3"><a href="#4-座標変換重ね合わせ">4. 座標変換（重ね合わせ）</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#javascript-による実装">JavaScript による実装</a></li>
<li class="toc-entry toc-h2"><a href="#注意点">注意点</a></li>
<li class="toc-entry toc-h2"><a href="#まとめ">まとめ</a></li>
</ul>
        </div>
  
        <div class="article">
          <p>先日公開した<a href="/airfoilapp/"><strong>AirfoilApp</strong></a>に、NACA 4 桁系列（例: NACA 2412）を自動生成する機能を追加しました。
固定のデータファイルを読み込むのではなく、数学的な定義に基づいて動的に点群を生成しています。</p>

<p>この記事では、その生成ロジックと数学的背景、そして JavaScript での実装方法について解説します。</p>

<h2 id="naca-4-桁系列とは">NACA 4 桁系列とは？</h2>

<p>NACA 4 桁系列（NACA 4-digit series）は、航空機の翼型として最もポピュラーな形状定義の一つです。
「NACA 2412」のような 4 つの数字には、以下の幾何学的パラメータが込められています。</p>

<ol>
  <li><strong>第 1 桁 ($m$)</strong>: 最大キャンバー（反り）の大きさ [弦長に対する%]</li>
  <li><strong>第 2 桁 ($p$)</strong>: 最大キャンバーの位置 [弦長に対する 1/10]</li>
  <li><strong>第 3-4 桁 ($t$)</strong>: 最大翼厚 [弦長に対する%]</li>
</ol>

<p>例えば <strong>NACA 2412</strong> なら以下のようになります。</p>

<ul>
  <li>最大キャンバー: 弦長の <strong>2%</strong> ($m=0.02$)</li>
  <li>最大キャンバー位置: 前縁から <strong>40%</strong> の位置 ($p=0.4$)</li>
  <li>最大翼厚: 弦長の <strong>12%</strong> ($t=0.12$)</li>
</ul>

<h2 id="生成アルゴリズム">生成アルゴリズム</h2>

<p>翼型の座標 $(x, y)$ を求めるには、<strong>「厚み分布」</strong>と<strong>「キャンバーライン（中心線）」</strong>を計算し、それらを重ね合わせる必要があります。</p>

<h3 id="1-座標の離散化cosine-spacing">1. 座標の離散化（Cosine Spacing）</h3>

<p>単純に $x = 0.0, 0.01, \dots, 1.0$ と等間隔に点を取ると、曲率の激しい「前縁（Leading Edge）」部分のカクつきが目立ってしまいます。
そこで、<strong>Cosine Spacing（余弦分布）</strong> を用いて、前縁と後縁付近に点を集中させます。</p>

\[x = \frac{1}{2} (1 - \cos\beta), \quad (0 \le \beta \le \pi)\]

<h3 id="2-翼厚分布-y_t">2. 翼厚分布 ($y_t$)</h3>

<p>NACA 4 桁系列の翼厚分布は、以下の多項式で定義されています。この式は「対称翼（00xx）」の片側の厚さを表します。</p>

\[y_t = 5t \left( 0.2969\sqrt{x} - 0.1260x - 0.3516x^2 + 0.2843x^3 - 0.1036x^4 \right)\]

<ul>
  <li>$t$: 最大翼厚（例: 0.12）</li>
  <li>最後の係数 $-0.1036$ は、後縁を完全に閉じる（厚み 0 にする）ためのものです。
厳密な定義では $-0.1015$ であり、後縁に少し隙間ができます。
これは製作の都合上、後縁の薄さを 0 にできないことを考慮してのものです。
解析上では、閉合させるために調整されることが多いようです。</li>
</ul>

<h3 id="3-キャンバーライン-y_c">3. キャンバーライン ($y_c$)</h3>

<p>キャンバー（反り）がある場合、中心線 $y_c$ は最大キャンバー位置 $p$ を境に 2 つの放物線で表されます。</p>

<p><strong>前半 ($0 \le x &lt; p$):</strong></p>

\[y_c = \frac{m}{p^2} (2px - x^2)\]

<p><strong>後半 ($p \le x \le 1$):</strong></p>

\[y_c = \frac{m}{(1-p)^2} (1-2p + 2px - x^2)\]

<h3 id="4-座標変換重ね合わせ">4. 座標変換（重ね合わせ）</h3>

<p>最後に、キャンバーラインに対して垂直方向に厚み $y_t$ を加算します。
そのためには、キャンバーラインの角度 $\theta$ が必要です。</p>

\[\theta = \arctan\left(\frac{dy_c}{dx}\right)\]

<p>$dy_c/dx$は前節で定義された$y_c$を$x$で微分すれば求めることができます。</p>

<p>この $\theta$ を使って、上面 $(x_u, y_u)$ と下面 $(x_l, y_l)$ を算出します。</p>

\[\begin{aligned}
x_u &amp;= x - y_t \sin\theta \\
y_u &amp;= y_c + y_t \cos\theta \\
x_l &amp;= x + y_t \sin\theta \\
y_l &amp;= y_c - y_t \cos\theta
\end{aligned}\]

<h2 id="javascript-による実装">JavaScript による実装</h2>

<p>以下は、このロジックを JavaScript 関数に落とし込んだものです。</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nf">generateNACA</span><span class="p">(</span><span class="nx">code</span><span class="p">,</span> <span class="nx">numPoints</span> <span class="o">=</span> <span class="mi">100</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// 1. パラメータのパース (例: "2412")</span>
  <span class="kd">const</span> <span class="nx">m</span> <span class="o">=</span> <span class="nf">parseInt</span><span class="p">(</span><span class="nx">code</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="mf">100.0</span><span class="p">;</span> <span class="c1">// キャンバー 0.02</span>
  <span class="kd">const</span> <span class="nx">p</span> <span class="o">=</span> <span class="nf">parseInt</span><span class="p">(</span><span class="nx">code</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="mf">10.0</span><span class="p">;</span> <span class="c1">// 位置 0.4</span>
  <span class="kd">const</span> <span class="nx">t</span> <span class="o">=</span> <span class="nf">parseInt</span><span class="p">(</span><span class="nx">code</span><span class="p">.</span><span class="nf">slice</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span> <span class="o">/</span> <span class="mf">100.0</span><span class="p">;</span> <span class="c1">// 厚み 0.12</span>

  <span class="kd">const</span> <span class="nx">upper</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="kd">const</span> <span class="nx">lower</span> <span class="o">=</span> <span class="p">[];</span>

  <span class="k">for </span><span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;=</span> <span class="nx">numPoints</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// 2. Cosine Spacingによるx座標の生成</span>
    <span class="kd">const</span> <span class="nx">beta</span> <span class="o">=</span> <span class="p">(</span><span class="nx">i</span> <span class="o">/</span> <span class="nx">numPoints</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">;</span>
    <span class="kd">const</span> <span class="nx">x</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">-</span> <span class="nb">Math</span><span class="p">.</span><span class="nf">cos</span><span class="p">(</span><span class="nx">beta</span><span class="p">));</span>

    <span class="c1">// 3. 厚み分布 yt の計算</span>
    <span class="kd">const</span> <span class="nx">yt</span> <span class="o">=</span>
      <span class="mi">5</span> <span class="o">*</span>
      <span class="nx">t</span> <span class="o">*</span>
      <span class="p">(</span><span class="mf">0.2969</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nf">sqrt</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="o">-</span> <span class="mf">0.126</span> <span class="o">*</span> <span class="nx">x</span> <span class="o">-</span> <span class="mf">0.3516</span> <span class="o">*</span> <span class="nx">x</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="mf">0.2843</span> <span class="o">*</span> <span class="nx">x</span> <span class="o">**</span> <span class="mi">3</span> <span class="o">-</span> <span class="mf">0.1015</span> <span class="o">*</span> <span class="nx">x</span> <span class="o">**</span> <span class="mi">4</span><span class="p">);</span>

    <span class="c1">// 4. キャンバーライン yc と勾配 dyc/dx の計算</span>
    <span class="kd">let</span> <span class="nx">yc</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kd">let</span> <span class="nx">dyc_dx</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="k">if </span><span class="p">(</span><span class="nx">m</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// 対称翼の場合</span>
      <span class="nx">yc</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="nx">dyc_dx</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">if </span><span class="p">(</span><span class="nx">x</span> <span class="o">&lt;</span> <span class="nx">p</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// 前半部分</span>
        <span class="nx">yc</span> <span class="o">=</span> <span class="p">(</span><span class="nx">m</span> <span class="o">/</span> <span class="p">(</span><span class="nx">p</span> <span class="o">*</span> <span class="nx">p</span><span class="p">))</span> <span class="o">*</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="nx">p</span> <span class="o">*</span> <span class="nx">x</span> <span class="o">-</span> <span class="nx">x</span> <span class="o">*</span> <span class="nx">x</span><span class="p">);</span>
        <span class="nx">dyc_dx</span> <span class="o">=</span> <span class="p">((</span><span class="mi">2</span> <span class="o">*</span> <span class="nx">m</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="nx">p</span> <span class="o">*</span> <span class="nx">p</span><span class="p">))</span> <span class="o">*</span> <span class="p">(</span><span class="nx">p</span> <span class="o">-</span> <span class="nx">x</span><span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// 後半部分</span>
        <span class="nx">yc</span> <span class="o">=</span> <span class="p">(</span><span class="nx">m</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="nx">p</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="mi">2</span> <span class="o">*</span> <span class="nx">p</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="nx">p</span> <span class="o">*</span> <span class="nx">x</span> <span class="o">-</span> <span class="nx">x</span> <span class="o">*</span> <span class="nx">x</span><span class="p">);</span>
        <span class="nx">dyc_dx</span> <span class="o">=</span> <span class="p">((</span><span class="mi">2</span> <span class="o">*</span> <span class="nx">m</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="nx">p</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="nx">p</span> <span class="o">-</span> <span class="nx">x</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="c1">// 5. 角度 theta の計算</span>
    <span class="kd">const</span> <span class="nx">theta</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nf">atan</span><span class="p">(</span><span class="nx">dyc_dx</span><span class="p">);</span>

    <span class="c1">// 6. 最終座標の計算</span>
    <span class="kd">const</span> <span class="nx">xu</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">-</span> <span class="nx">yt</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nf">sin</span><span class="p">(</span><span class="nx">theta</span><span class="p">);</span>
    <span class="kd">const</span> <span class="nx">yu</span> <span class="o">=</span> <span class="nx">yc</span> <span class="o">+</span> <span class="nx">yt</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nf">cos</span><span class="p">(</span><span class="nx">theta</span><span class="p">);</span>

    <span class="kd">const</span> <span class="nx">xl</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">+</span> <span class="nx">yt</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nf">sin</span><span class="p">(</span><span class="nx">theta</span><span class="p">);</span>
    <span class="kd">const</span> <span class="nx">yl</span> <span class="o">=</span> <span class="nx">yc</span> <span class="o">-</span> <span class="nx">yt</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nf">cos</span><span class="p">(</span><span class="nx">theta</span><span class="p">);</span>

    <span class="nx">upper</span><span class="p">.</span><span class="nf">push</span><span class="p">({</span> <span class="na">x</span><span class="p">:</span> <span class="nx">xu</span><span class="p">,</span> <span class="na">y</span><span class="p">:</span> <span class="nx">yu</span> <span class="p">});</span>
    <span class="nx">lower</span><span class="p">.</span><span class="nf">push</span><span class="p">({</span> <span class="na">x</span><span class="p">:</span> <span class="nx">xl</span><span class="p">,</span> <span class="na">y</span><span class="p">:</span> <span class="nx">yl</span> <span class="p">});</span>
  <span class="p">}</span>

  <span class="c1">// 点群を 後縁 -&gt; 上面 -&gt; 前縁 -&gt; 下面 -&gt; 後縁 の順に結合して返す</span>
  <span class="c1">// (実装省略: reverseやconcatを使用)</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="注意点">注意点</h2>

<ul>
  <li><strong>後縁の閉合</strong>: NACA の公式通りに計算すると、後縁（Trailing Edge）の厚みは完全なゼロにはなりません。CFD（流体解析）などでメッシュを切る場合、後縁が開いていると問題になることがあるため、最後の点を強制的に $(1.0, 0.0)$ に閉じる処理を入れるか、係数を微調整することが一般的です。</li>
  <li><strong>前縁半径</strong>: NACA 4 桁系列は前縁が丸みを帯びていますが、超音速翼など鋭利な前縁が必要な場合は別の定義式（6 桁系列やバイコンベックスなど）が必要になります。</li>
</ul>

<h2 id="まとめ">まとめ</h2>

<p>NACA 翼型は NASA の前身組織であるアメリカ航空諮問委員会(National Advisory Committee for Aeronautics)が開発した一連の翼型のことをいいます。
航空宇宙分野でよく使われる標準的な翼型ですので、馴染みのない人はこの際に覚えておきましょう。</p>

        
<div class="bibliography mt-12 pt-8 border-t border-gray-200">
  <h3 class="text-lg font-bold text-gray-800 mb-4 flex items-center gap-2">
    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-400"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path></svg>
    参考文献
  </h3>
  <ul class="list-none m-0 p-0 space-y-3">
    
    <li class="text-sm text-gray-600 pl-3 border-l-2 border-gray-300">
      <span class="font-bold text-gray-800">Airfoil Tools</span>
      
      <span class="italic">NACA 4 digit airfoil generator</span>.
      
      
      
        <br><a href="http://airfoiltools.com/airfoil/naca4digit" target="_blank" rel="noopener noreferrer" class="text-[var(--color-brand)] hover:underline break-all">http://airfoiltools.com/airfoil/naca4digit</a>
      
    </li>
    
    <li class="text-sm text-gray-600 pl-3 border-l-2 border-gray-300">
      <span class="font-bold text-gray-800">NASA Technical Memorandum 4741</span>
      
      <span class="italic"></span>.
      
      
        <br><span class="text-xs text-gray-500">Computer Program To Obtain Ordinates for NACA Airfoils</span>
      
      
        <br><a href="https://www.pdas.com/refs/tm4741.pdf" target="_blank" rel="noopener noreferrer" class="text-[var(--color-brand)] hover:underline break-all">https://www.pdas.com/refs/tm4741.pdf</a>
      
    </li>
    
  </ul>
</div>

        </div>   
      </main>
  
      <aside class="lg:col-span-3 relative">
        
        <div class="note-toc-sidebar">
          <p class="toc-title">目次</p>
          <ul id="toc" class="section-nav">
<li class="toc-entry toc-h2"><a href="#naca-4-桁系列とは">NACA 4 桁系列とは？</a></li>
<li class="toc-entry toc-h2"><a href="#生成アルゴリズム">生成アルゴリズム</a>
<ul>
<li class="toc-entry toc-h3"><a href="#1-座標の離散化cosine-spacing">1. 座標の離散化（Cosine Spacing）</a></li>
<li class="toc-entry toc-h3"><a href="#2-翼厚分布-y_t">2. 翼厚分布 ($y_t$)</a></li>
<li class="toc-entry toc-h3"><a href="#3-キャンバーライン-y_c">3. キャンバーライン ($y_c$)</a></li>
<li class="toc-entry toc-h3"><a href="#4-座標変換重ね合わせ">4. 座標変換（重ね合わせ）</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#javascript-による実装">JavaScript による実装</a></li>
<li class="toc-entry toc-h2"><a href="#注意点">注意点</a></li>
<li class="toc-entry toc-h2"><a href="#まとめ">まとめ</a></li>
</ul>
        </div>
  
      </aside>
  
    </div>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    // 1. 監視する見出し要素を取得 (記事内の h1, h2, h3)
    const headers = document.querySelectorAll('.article h1, .article h2, .article h3');
    // 2. サイドバーのリンクを取得
    const tocLinks = document.querySelectorAll('.note-toc-sidebar a');
  
    // IntersectionObserver の設定
    const observerOptions = {
      root: null, // ビューポートを基準
      // rootMargin: 上端から-100pxの位置〜画面の残り60%までを「アクティブ判定エリア」とする
      // これにより、見出しが画面上部に来たタイミングでハイライトが切り替わります
      rootMargin: '-100px 0px -60% 0px', 
      threshold: 0
    };
  
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        // 画面内に入った（または出た）場合
        if (entry.isIntersecting) {
          // 現在のアクティブクラスを全削除
          tocLinks.forEach(link => link.classList.remove('active'));
          
          // 対応するIDを持つリンクを探してアクティブ化
          const id = entry.target.getAttribute('id');
          if (id) {
            const activeLink = document.querySelector(`.note-toc-sidebar a[href="#${id}"]`);
            if (activeLink) {
              activeLink.classList.add('active');
            }
          }
        }
      });
    }, observerOptions);
  
    // 各見出しを監視対象に登録
    headers.forEach(header => observer.observe(header));
  });
  </script>

    </main>

    <!-- <footer>
  <div class="footer">
    <div class="copy">&copy;2024 九大ロボ技</div>
  </div>
</footer> -->

<footer class="bg-[#9191a7] mt-4">
  <div class="mx-auto p-2 text-center" style="font-family: var(--font-lubri)">
    <p>© 2025 やぱのブログ</p>
  </div>
</footer>

  </body>
</html>